<div class="row">
  <div class="col-lg-6">
    <%= link_to t('buttons.voltar'), clientes_path, :class=>"btn btn-sm btn-default" %>
  </div>
</div>
<br/>

<div class="row">
  <div class="col-lg-6">
    <div class="panel panel-default">
      <div class="panel-heading">
      <%= @operacao %>
      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-lg-12">
            <%= form_with(model: cliente, local: true) do |form| %>
              <% if cliente.errors.any? %>
                <div id="error_explanation">
                  <h2><%= pluralize(cliente.errors.count, "error") %> prohibited this cliente from being saved:</h2>
                  <ul>
                  <% cliente.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                  </ul>
                </div>
              <% end %>

              <div class="form-group">
                <label>Tipo</label>
                <select class="form-control" name="tipo_cliente" id="tipo_cliente">
                  <option value="fisico">Físico</option>
                  <option value="juridico">Jurídico</option>
                </select>
              </div>

              <div class="form-group">
                <%= form.label :nome %>
                <%= form.text_field :nome, id: :cliente_nome, :class=>"form-control" %>
              </div>

              <div class="form-group">
                <%= form.label :cpf_cnpj %>
                <%= form.text_field :cpf_cnpj, id: :cliente_cpf_cnpj, :class=>"form-control cpf" %>
              </div>

              <div class="form-group" id="grupo_data_nascimento">
                <%= form.label :data_nascimento %>
                <%= form.text_field :data_nascimento, id: :cliente_data_nascimento, value: datef(@cliente.data_nascimento), :class=>"form-control date", :placeholder=>"Data" %>
              </div>

              <div class="form-group">
                <%= form.label :email %>
                <%= form.text_field :email, id: :cliente_email, :class=>"form-control" %>
              </div>


              <div class="actions">
                <button type="submit" class="btn btn-sm btn-primary"><%= t('buttons.gravar') %></button>
              </div>
            <% end %>
          </div>
        </div>
        <!-- /.row (nested) -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
</div>

<script>
  $(document).ready(function(){

    configuraCampos();

    function configuraCampos(){
      if ($('#tipo_cliente').val() == 'juridico'){
        $('#grupo_data_nascimento').hide();
        $('#cliente_cpf_cnpj').removeClass('cpf');
        $('#cliente_cpf_cnpj').addClass('cnpj');
        Mask(".cnpj");
      } else {
        $('#grupo_data_nascimento').show();
        $('#cliente_cpf_cnpj').removeClass('cnpj');
        $('#cliente_cpf_cnpj').addClass('cpf');
        Mask(".cpf");
      }
    }

    $('#tipo_cliente').change(function(){
      configuraCampos();
    });
  });
</script>
